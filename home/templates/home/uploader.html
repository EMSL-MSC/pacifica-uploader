<!DOCTYPE html>
<html>
    <head>
	    <title>MyEMSL Instrument Data Uploader</title>

        {% include "includes/global_styles.html" %}
        <link rel="stylesheet" href="{{ MEDIA_URL }}stylesheets/upload_style.css">
        <link rel="stylesheet" href="{{ MEDIA_URL }}stylesheets/file_directory_styling.css">
        <script src="{{ MEDIA_URL }}scripts/uploader_common.js" type="text/javascript"></script>
    </head>
    <body>
        <div class="page_content">
            {% include "includes/view_header.html" %}
            <div id="header_container">
                <h1 class="underline">MyEMSL File Upload</h1>
                <div id="login_id_container">
                     {% for meta in metaList %}
                          {% if meta.type == 'logged_on'  %}
                               <p><em>{{meta.value}}</em></p>
                          {% endif %}
                     {% endfor %}
                    
                    <p class="smallprint"><a href="/logout">Not You? Click here to Logout</a></p>
                </div>
            </div>

            <div class="themed">
                <form method="post" enctype="multipart/form-data">
	                {% csrf_token %}

                        <div class="full_width_block" style="margin-top:1em;">
                            <label for="proposal">Proposal</label><br>
                            <select name="proposal" id="proposal" class="main_page_selector">
                            {% for meta in metaList %}
                                {% if meta.type == 'select'  %}
                                    <label for="{{meta.metaID}}" style="display:block;">{{meta.displayTitle}}</label>
                                    <select id="{{meta.metaID}}" name="{{meta.metaID}}" class="main_page_selector"> 
                                {% endif %}
                            {% endfor %}
                            </select>
                        </div>

                        <div class="full_width_block" style="margin-top:1em;">
                            <ul>
                            {% for meta in metaList %}
                                {% if meta.type == 'enter'  %}
                                    <li>
                                       <label for="{{meta.metaID}}" style="display:block;">{{meta.displayTitle}}</label>
                                       <input type="text" id="{{meta.metaID}}" style="width:80%;border-width:1px;" name="{{meta.metaID}}" value = "{{meta.value}}">
                                    </li>                                
                                {% endif %}
                            {% endfor %}
                            </ul>
                        </div>

                    </fieldset>
                    <fieldset style="margin-top:1em;padding: 1em;">
                        <legend>Files to be Uploaded to the EMSL Archive</legend>
                        <div class="full_width_block">
                            <div id="uploadFiles" style=width: 75%;">
                                <ul id="load" style="display:none;" class="ui-fancytree-source ui-helper-hidden">
                                    <li id="upload" class="lazy folder">
                                        <span> Upload </span>
                                    </li>
                                </ul>
                            </div>
                            <div style="text-align: center; position: absolute; top:0; right:0;">  
                              <input type="submit" name="upload_btn" id="upload_btn" value="Upload Files &amp; Metadata" />
                              <div id="message">
                                  <p class = "tight">
                                      <strong></strong><br />
                                  </p>
                              </div>
                          </div>
                        </div>
                    </fieldset>
                    <fieldset style="margin-top:1em;padding: 1em;">
                        <legend>Choose Files to Upload from the EMSL Instrument</legend>
                        <div class="full_width_block">
                          <div id="tree">
                            <ul id="root" style="display:none;" class="ui-fancytree-source ui-helper-hidden">
                                <li id="{{data_root}}" class="lazy folder">
                                    <span>"{{data_root}}"</span>
                                </li>
                            </ul>
                          </div>
                        </div>
                        
                    </fieldset>
                </form>
            </div>
        </div>
        <div id="status_info_container" style="display:none;"></div>
    </body>
</html>
